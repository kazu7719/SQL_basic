###　データベースの設定方法

## MariaDB(マリアディービー)
・・・Amazon Linux2で使用。
MySQLと同様

①yumコマンドで、MariaDBをインストール
②systemctlコマンドで、データベースを起動
③データベースのrootパスワードを設定
④データベースへの接続を確認


### EC2のRailsを起動する手順(手動デプロイ)

①EC2のサーバーに開発中のアプリケーションのコードをクローンする準備
→アプリのコードをGithubからEC2サーバーへクローンするが、
EC2インスタンスからGithubにアクセスするために、作成したEC2インスタンスのssh公開鍵をGithubに登録する

②アプリケーションサーバーを設定
→Unicornを使い、rails sコマンドに代わりアプリケーションサーバーを起動する。
EC2サーバにssh接続しUnicornを起動することで全世界からアクセスできるようにする。

プロセス
・・・PC上で動くすべてのプログラムの実行時の単位。
アクティビティモニタで、PC上で動いているプロセスを確認

③Unicornの設定
→これが完了することでアプリケーションのコードをEC2にクローンすることが可能

④Swapファイルを使い、メモリを増強する処理を行う
⑤EC2内でgemをインストール
⑥環境変数を設定する
⑦セキュリティグループのポートを設定
→立ち上げたばかりのEC2インスタンスはsshでアクセスすることはできるが、
HTTPなどの他の通信方法では一切つながらないようになっている。そのためポートを解放する必要がある

⑧database.ymlのファイルファイルを本番環境にmysqlの設定に合わせて編集
⑨RAILS_ENV=productionコマンドでEC2内にデータベースを作成
10アセットファイルをコンパイルする
11psコマンドで、Unicornのプロセスを確認
12killコマンドで、現在動いているプロセスを停止
13RAILS_SERVE_STATIC_FILES=1コマンドでrailsを再起動